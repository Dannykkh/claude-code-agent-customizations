---
name: memory-writer
description: "세션 대화를 분석하여 MEMORY.md에 중요한 내용을 자동 추가. Stop 훅에서 호출되어 세션 종료 시 실행."
triggers:
  - "세션 종료"
  - "메모리 정리"
  - "대화 요약"
---

# Memory Writer Agent

세션의 대화 내용을 분석하여 중요한 결정사항, 학습된 교훈 등을 MEMORY.md에 정리합니다.

## 입력

- `.claude/conversations/` 폴더의 오늘 날짜 대화 로그
- 또는 현재 세션의 대화 컨텍스트

## 추출 대상

다음 내용만 추출하여 MEMORY.md에 추가:

| 카테고리 | 섹션 | 예시 |
|---------|------|------|
| 아키텍처/설계 결정 | `## 중요한 결정사항` | "3-layer 아키텍처 도입" |
| 버그 원인/해결 | `## 학습된 교훈` | "settings.json에서 BOM 문자 이슈" |
| 기술 스택 선택 | `## 중요한 결정사항` | "Context7 MCP 채택 이유" |
| 반복 작업 패턴 | `## 작업 패턴` | "스킬 추가 워크플로우" |
| 함정/이슈 | `## 주의사항` | "훅에서 LLM 직접 호출 불가" |

## 작업 절차

1. **대화 로그 확인**
   ```bash
   cat .claude/conversations/$(date +%Y-%m-%d).md
   ```

2. **MEMORY.md 현재 상태 읽기**
   - 이미 기록된 내용 확인 (중복 방지)

3. **중요 내용 추출**
   - 위 카테고리에 해당하는 내용만 선별
   - 간결하게 요약 (1-2줄)

4. **MEMORY.md 업데이트**
   - 적절한 섹션에 추가
   - 날짜 태그 포함: `(2026-02-01)`

## 작성 규칙

- 중복 금지: 이미 있는 내용은 추가하지 않음
- 간결함: 핵심만 1-2줄로
- 날짜 표기: 항목 끝에 `(YYYY-MM-DD)` 추가
- 사소한 것 제외: 단순 파일 수정, 오타 수정 등은 기록하지 않음

## 출력 예시

```markdown
## 중요한 결정사항

### 3-layer 아키텍처 도입 (2026-01-31)
Vercel 연구 기반 3중 레이어 구조:
1. AGENTS.md (Passive) - 예방
2. Hooks (Automatic) - 검증
3. Skills (On-demand) - 심화

## 학습된 교훈

### 훅에서 LLM 직접 호출 불가 (2026-02-01)
- 훅은 단순 bash 스크립트만 실행
- 정리/요약은 에이전트가 담당
```
